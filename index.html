<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Filestack  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Filestack  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Filestack Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="http://github.com/filestack/filestack-ios">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Filestack Reference</a>
      <img class="carat" src="img/carat.png" />
      Filestack  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Filestack.html">Filestack</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/FolderListResponse.html">FolderListResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/StoreResponse.html">StoreResponse</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CloudProvider.html">CloudProvider</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='filestack-ios-sdk' class='heading'>Filestack iOS SDK</h1>

<p><a href="https://www.filestack.com"><img src="https://filestack.com/themes/filestack/assets/images/press-articles/color.svg" align="left" hspace="10" vspace="6"></a>
This is the official Swift iOS for Filestack — API and content management system that makes it easy to add powerful file uploading and transformation capabilities to any web or mobile application.</p>
<h2 id='resources' class='heading'>Resources</h2>

<ul>
<li><a href="https://www.filestack.com">Filestack</a></li>
<li><a href="https://www.filestack.com/docs">Documentation</a></li>
<li><a href="https://filestack.github.io/filestack-ios/">API Reference</a></li>
</ul>
<h2 id='installing' class='heading'>Installing</h2>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p><a href="http://cocoapods.org/">CocoaPods</a> is a dependency manager for Cocoa projects. You can install it with the following command:</p>

<p><code>$ gem install cocoapods</code></p>

<p>To integrate Filestack into your Xcode project using CocoaPods, specify it in your <code>Podfile</code>:</p>
<pre class="highlight plaintext"><code>source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '9.0'
use_frameworks!

target '&lt;Your Target Name&gt;' do
    pod 'Filestack', '~&gt; 0.5-pre2'
end
</code></pre>

<p>Then, run the following command:</p>

<p><code>$ pod install</code></p>
<h3 id='carthage' class='heading'>Carthage</h3>

<p><a href="https://github.com/Carthage/Carthage">Carthage</a> is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks.</p>

<p>You can install Carthage with <a href="http://brew.sh/">Homebrew</a> using the following command:</p>
<pre class="highlight plaintext"><code>$ brew update
$ brew install carthage
</code></pre>

<p>To integrate Filestack into your Xcode project using Carthage, specify it in your <code>Cartfile</code>:</p>

<p><code>github &quot;filestack/filestack-ios&quot; ~&gt; 0.5-pre2</code></p>

<p>Run <code>carthage update</code> to build the framework and drag the built <code>Filestack.framework</code> into your Xcode project. Additionally, add <code>Filestack.framework</code>, <code>FilestackSDK.framework</code>, <code>Alamofire.framework</code>, and <code>Arcane.framework</code> to the embedded frameworks build phase of your app&rsquo;s target.</p>
<h3 id='manually' class='heading'>Manually</h3>
<h4 id='embedded-framework' class='heading'>Embedded Framework</h4>

<p>Open up Terminal, cd into your top-level project directory, and run the following command <q>if</q> your project is not initialized as a git repository:</p>

<p><code>$ git init</code></p>

<p>Add Filestack and its dependencies as git submodules by running the following commands:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>git submodule add https://github.com/filestack/filestack-ios.git
<span class="gp">$ </span>git submodule add https://github.com/filestack/filestack-swift.git
<span class="gp">$ </span>git submodule add https://github.com/Alamofire/Alamofire.git
<span class="gp">$ </span>git submodule add https://github.com/onmyway133/Arcane.git
</code></pre>

<p>Open the new <code>filestack-ios</code> folder, and drag the <code>Filestack.xcodeproj</code> into the Project Navigator of your application&rsquo;s Xcode project.</p>

<p>It should appear nested underneath your application&rsquo;s blue project icon. Whether it is above or below all the other Xcode groups does not matter.
Select the <code>Filestack.xcodeproj</code> in the Project Navigator and verify the deployment target matches that of your application target.</p>

<p>Next, select your application project in the Project Navigator (blue project icon) to navigate to the target configuration window and select the application target under the <q>Targets</q> heading in the sidebar.</p>

<p>In the tab bar at the top of that window, open the <q>General</q> panel.</p>

<p>Click on the + button under the <q>Embedded Binaries</q> section and choose the <code>Filestack.framework</code> for iOS.</p>

<p>Repeat the same process for adding <code>Alamofire</code>, <code>Arcane</code>, and <code>FilestackSDK</code> dependent frameworks.</p>
<h2 id='usage' class='heading'>Usage</h2>
<h3 id='importing-required-frameworks' class='heading'>Importing Required Frameworks</h3>

<p>Any source files that need to use the Filestack iOS SDK should import the <code>Filestack</code> and <code>FilestackSDK</code> frameworks:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Filestack</span>
<span class="kd">import</span> <span class="kt">FilestackSDK</span>
</code></pre>
<h3 id='instantiating-a-filestack-object' class='heading'>Instantiating a Filestack object</h3>
<pre class="highlight swift"><code><span class="c1">// Initialize a `Policy` with the expiry time and permissions you need.</span>
<span class="k">let</span> <span class="nv">oneDayInSeconds</span><span class="p">:</span> <span class="kt">TimeInterval</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="c1">// expires tomorrow</span>
<span class="k">let</span> <span class="nv">policy</span> <span class="o">=</span> <span class="kt">Policy</span><span class="p">(</span><span class="c1">// Set your expiry time (24 hours in our case)</span>
                    <span class="nv">expiry</span><span class="p">:</span> <span class="kt">Date</span><span class="p">(</span><span class="nv">timeIntervalSinceNow</span><span class="p">:</span> <span class="n">oneDayInSeconds</span><span class="p">),</span>
                    <span class="c1">// Set the permissions you want your policy to have</span>
                    <span class="nv">call</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="n">pick</span><span class="p">,</span> <span class="o">.</span><span class="n">read</span><span class="p">,</span> <span class="o">.</span><span class="n">store</span><span class="p">])</span>

<span class="c1">// Initialize a `Security` object by providing a `Policy` object and your app secret.</span>
<span class="c1">// You can find and/or enable your app secret in the Developer Portal.</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">security</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">Security</span><span class="p">(</span><span class="nv">policy</span><span class="p">:</span> <span class="n">policy</span><span class="p">,</span> <span class="nv">appSecret</span><span class="p">:</span> <span class="s">"YOUR-APP-SECRET"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">filestack</span> <span class="o">=</span> <span class="kt">Filestack</span><span class="p">(</span><span class="nv">apiKey</span><span class="p">:</span> <span class="s">"YOUR-API-KEY"</span><span class="p">,</span> <span class="nv">security</span><span class="p">:</span> <span class="n">security</span><span class="p">)</span>
</code></pre>
<h3 id='uploading-local-files' class='heading'>Uploading Local Files</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">localURL</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"file:///an-app-sandbox-friendly-local-url"</span><span class="p">)</span><span class="o">!</span>

<span class="k">let</span> <span class="nv">uploadRequest</span> <span class="o">=</span> <span class="n">filestack</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">localURL</span><span class="p">,</span> <span class="nv">uploadProgress</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">progress</span><span class="p">)</span> <span class="k">in</span>
    <span class="c1">// Here you may update the UI to reflect the upload progress.</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"progress = </span><span class="se">\(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">progress</span><span class="p">)</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
    <span class="c1">// Try to obtain Filestack handle</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">json</span> <span class="o">=</span> <span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">json</span><span class="p">,</span> <span class="k">let</span> <span class="nv">handle</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"handle"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="c1">// Use Filestack handle</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">error</span> <span class="p">{</span>
        <span class="c1">// Handle error</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='uploading-photos-and-videos-from-the-photo-library-or-camera' class='heading'>Uploading Photos and Videos from the Photo Library or Camera</h3>
<pre class="highlight swift"><code><span class="c1">// The view controller that will be presenting the image picker.</span>
<span class="k">let</span> <span class="nv">presentingViewController</span> <span class="o">=</span> <span class="k">self</span>

<span class="c1">// The source type (e.g. `.camera`, `.photoLibrary`)</span>
<span class="k">let</span> <span class="nv">sourceType</span><span class="p">:</span> <span class="kt">UIImagePickerControllerSourceType</span> <span class="o">=</span> <span class="o">.</span><span class="n">camera</span>

<span class="k">let</span> <span class="nv">uploadRequest</span> <span class="o">=</span> <span class="n">filestack</span><span class="o">.</span><span class="nf">uploadFromImagePicker</span><span class="p">(</span><span class="nv">viewController</span><span class="p">:</span> <span class="n">presentingViewController</span><span class="p">,</span> <span class="nv">sourceType</span><span class="p">:</span> <span class="n">sourceType</span><span class="p">,</span> <span class="nv">uploadProgress</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">progress</span><span class="p">)</span> <span class="k">in</span>
    <span class="c1">// Here you may update the UI to reflect the upload progress.</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"progress = </span><span class="se">\(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">progress</span><span class="p">)</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
    <span class="c1">// Try to obtain Filestack handle</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">json</span> <span class="o">=</span> <span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">json</span><span class="p">,</span> <span class="k">let</span> <span class="nv">handle</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"handle"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="c1">// Use Filestack handle</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">error</span> <span class="p">{</span>
        <span class="c1">// Handle error</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>In both uploading examples, an upload may be cancelled at anytime by calling <code>cancel()</code> on the <code>MultipartUpload</code> object returned by any of the functions above:</p>
<pre class="highlight swift"><code><span class="n">uploadRequest</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
</code></pre>
<h3 id='listing-contents-from-a-cloud-provider' class='heading'>Listing contents from a cloud provider</h3>
<pre class="highlight swift"><code><span class="c1">// The cloud provider to use (it may require authentication)</span>
<span class="k">let</span> <span class="nv">provider</span><span class="p">:</span> <span class="kt">CloudProvider</span> <span class="o">=</span> <span class="o">.</span><span class="n">googleDrive</span>

<span class="c1">// The cloud provider's path (e.g. "/" for the root's folder)</span>
<span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="s">"/"</span>

<span class="c1">// An URL scheme that your app can handle.</span>
<span class="k">let</span> <span class="nv">appURLScheme</span> <span class="o">=</span> <span class="s">"FilestackDemo"</span>

<span class="n">filestack</span><span class="o">.</span><span class="nf">folderList</span><span class="p">(</span><span class="nv">provider</span><span class="p">:</span> <span class="n">provider</span><span class="p">,</span> <span class="nv">path</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="nv">pageToken</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">appURLScheme</span><span class="p">:</span> <span class="n">appURLScheme</span><span class="p">)</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span> <span class="p">{</span>
        <span class="c1">// Handle error</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">contents</span> <span class="p">{</span>
        <span class="c1">// Contents received — do something with them.</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Received </span><span class="se">\(</span><span class="n">contents</span><span class="o">.</span><span class="n">count</span><span class="se">)</span><span class="s"> entries."</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="k">let</span> <span class="nv">nextToken</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">nextToken</span> <span class="p">{</span>
         <span class="c1">// More contents are available — to retrieve next page, pass this `nextToken` as a parameter in the `folderList` function.</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="c1">// No more contents available — we are done.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Please also make sure to add the following function to your <code>AppDelegate</code> to allow resuming any folder list request after authentication against a cloud provider. Again, the <code>appURLScheme</code> must be set to an URL scheme your app is registered to handle:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">app</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplicationOpenURLOptionsKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>

    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span><span class="p">?</span><span class="o">.</span><span class="nf">lowercased</span><span class="p">()</span> <span class="o">==</span> <span class="n">appURLScheme</span><span class="o">.</span><span class="nf">lowercased</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">url</span><span class="o">.</span><span class="n">host</span> <span class="o">==</span> <span class="s">"Filestack"</span> <span class="p">{</span>
        <span class="kt">NotificationCenter</span><span class="o">.</span><span class="k">default</span><span class="o">.</span><span class="nf">post</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">Filestack</span><span class="o">.</span><span class="n">resumeCloudRequestNotification</span><span class="p">,</span> <span class="nv">object</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// Your custom handling here.</span>

    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre>
<h3 id='storing-contents-from-a-cloud-provider-into-a-store-location' class='heading'>Storing contents from a cloud provider into a store location</h3>
<pre class="highlight swift"><code><span class="c1">// The cloud provider to use</span>
<span class="k">let</span> <span class="nv">provider</span><span class="p">:</span> <span class="kt">CloudProvider</span> <span class="o">=</span> <span class="o">.</span><span class="n">googleDrive</span>

<span class="c1">// A path to a file in the cloud</span>
<span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="s">"/some-large-image.jpg"</span>

<span class="c1">// The store options representing the store location, region, access, etc. for your file store.</span>
<span class="k">let</span> <span class="nv">storeOptions</span> <span class="o">=</span> <span class="kt">StorageOptions</span><span class="p">(</span><span class="nv">location</span><span class="p">:</span> <span class="o">.</span><span class="n">dropbox</span><span class="p">)</span>

<span class="n">filestack</span><span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">provider</span><span class="p">:</span> <span class="n">provider</span><span class="p">,</span> <span class="nv">path</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="nv">storeOptions</span><span class="p">:</span> <span class="n">storeOptions</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span> <span class="p">{</span>
        <span class="c1">// Handle error</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">contents</span> <span class="p">{</span>
        <span class="c1">// Contents received describing the request's result.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Please make sure to authenticate against the cloud provider first by using the <code>folderList</code> function before calling <code>store</code>.</p>
<h3 id='notes' class='heading'>Notes</h3>

<ul>
<li>Some of the functions above support additional optional parameters, consult the <a href="https://filestack.github.io/filestack-ios/Classes/Filestack.html">API Reference</a> for more details.</li>
</ul>
<h2 id='versioning' class='heading'>Versioning</h2>

<p>Filestack iOS SDK follows the <a href="http://semver.org/">Semantic Versioning</a>.</p>
<h2 id='issues' class='heading'>Issues</h2>

<p>If you have problems, please create a <a href="https://github.com/filestack/filestack-ios/issues">Github Issue</a>.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>Please see <a href="https://github.com/filestack/filestack-ios/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> for details.</p>
<h2 id='credits' class='heading'>Credits</h2>

<p>Thank you to all the <a href="https://github.com/filestack/filestack-ios/graphs/contributors">contributors</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2017 <a class="link" href="https://github.com/filestack/filestack-ios" target="_blank" rel="external">Filestack</a>. All rights reserved. (Last updated: 2017-11-02)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
